var mp4Controllers=angular.module("mp4Controllers",[]);mp4Controllers.controller("WayfairMatchAppController",["$scope","$http","CommonData",function($scope,$http){function sendLikeDislikeEvent(event_to_send,event_kind){$scope.$broadcast("timer-reset"),$scope.$broadcast("timer-start"),$scope.resp.push(event_to_send),"clickEvent"===event_kind?1==$scope.products.length&&setTimeout(function(){$http.get("data/Sofas.json").then(function(response){$scope.products=response.data.slice(0,30)})},200):"swipeEvent"===event_kind&&0==$scope.products.length&&setTimeout(function(){$http.get("data/Sofas.json").then(function(response){$scope.products=response.data.slice(0,30)})},200)}$scope.count_down=119;var swipe_flag=!1;$scope.resp=[],$http.get("data/Bedroom_Sets-Contemporary.json").then(function(response){$scope.products=response.data.slice(0,30)}),$scope.options={throwOutConfidence:function(offset,element){return offset>0&&$("."+element.className).children(".status_like").css("opacity","1"),0>offset&&$("."+element.className).children(".status_nope").css("opacity","1"),$(window).width()<=739?Math.min(Math.abs(offset)/element.offsetWidth*2,1):Math.min(Math.abs(offset)/element.offsetWidth/1.4,1)},isThrowOut:function(offset,element,throwOutConfidence){return $("."+element.className).children(".status_like").css("opacity","0"),$("."+element.className).children(".status_nope").css("opacity","0"),swipe_flag=!0,1===throwOutConfidence&&($scope.swipe_remove(),offset>0?sendLikeDislikeEvent("like","swipeEvent"):sendLikeDislikeEvent("dislike","swipeEvent")),1===throwOutConfidence}},$scope.swipe_remove=function(){$scope.remove_top(),$(".product_cards li:last-child").fadeOut(300,function(){})},$scope.remove_top=function(){$scope.percentage_off=Math.round(10*Math.random()*10);var top_index=$(".product_cards li:last-child").attr("class");top_index=top_index.substr(4),$scope.products.splice(top_index,1)},$scope.click_remove=function(){$scope.products.length>0&&$scope.remove_top()},$(".buttons .like").click(function(e){e.preventDefault(),sendLikeDislikeEvent("like","clickEvent")}),$(".buttons .dislike").click(function(e){e.preventDefault(),sendLikeDislikeEvent("dislike","clickEvent")})}]);